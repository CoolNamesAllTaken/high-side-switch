Version 4
SHEET 1 3180 1408
WIRE -1184 64 -1312 64
WIRE -1024 64 -1088 64
WIRE -864 64 -1024 64
WIRE -736 64 -864 64
WIRE -416 64 -736 64
WIRE -208 64 -416 64
WIRE -48 64 -208 64
WIRE 144 64 -48 64
WIRE 320 64 240 64
WIRE 352 64 320 64
WIRE 464 64 432 64
WIRE 800 64 464 64
WIRE 944 64 800 64
WIRE -1024 96 -1024 64
WIRE -416 96 -416 64
WIRE -48 96 -48 64
WIRE 944 96 944 64
WIRE -208 112 -208 64
WIRE 320 112 320 64
WIRE 512 112 320 112
WIRE 576 112 512 112
WIRE 800 112 800 64
WIRE -1312 128 -1312 64
WIRE -112 144 -144 144
WIRE 512 144 512 112
WIRE -1104 176 -1104 112
WIRE -1024 176 -1024 160
WIRE -1024 176 -1104 176
WIRE -1024 192 -1024 176
WIRE 464 192 464 64
WIRE 464 192 288 192
WIRE -416 208 -416 176
WIRE -208 208 -208 176
WIRE -208 208 -416 208
WIRE -144 208 -144 144
WIRE -144 208 -208 208
WIRE -48 208 -48 192
WIRE 48 208 -48 208
WIRE 160 208 160 112
WIRE 160 208 128 208
WIRE 944 208 944 176
WIRE 1232 208 1232 192
WIRE -48 224 -48 208
WIRE 800 224 800 176
WIRE -208 240 -208 208
WIRE 288 256 288 192
WIRE 304 256 288 256
WIRE 512 256 512 224
WIRE 512 256 496 256
WIRE -1312 272 -1312 208
WIRE -144 272 -144 208
WIRE -112 272 -144 272
WIRE -1024 304 -1024 272
WIRE 512 304 512 256
WIRE 512 304 496 304
WIRE 1232 304 1232 288
WIRE 1328 304 1232 304
WIRE 1232 320 1232 304
WIRE 944 336 944 288
WIRE -208 352 -208 320
WIRE -48 352 -48 320
WIRE 304 352 272 352
WIRE 576 352 576 112
WIRE 576 352 496 352
WIRE -1312 384 -1312 352
WIRE 272 384 272 352
WIRE -384 400 -432 400
WIRE -272 400 -304 400
WIRE 928 400 800 400
WIRE 1232 416 1232 400
WIRE 1408 448 1408 416
WIRE 2640 448 2640 432
WIRE 864 464 864 448
WIRE 1328 464 1328 304
WIRE 1376 464 1328 464
WIRE -208 480 -208 448
WIRE 800 480 800 400
WIRE 832 480 800 480
WIRE 1472 480 1440 480
WIRE 1488 480 1472 480
WIRE 1600 480 1568 480
WIRE 1680 480 1600 480
WIRE 1984 480 1680 480
WIRE -1312 496 -1312 464
WIRE 928 496 928 400
WIRE 928 496 896 496
WIRE 1072 496 928 496
WIRE 1200 496 1072 496
WIRE 1312 496 1280 496
WIRE 1376 496 1312 496
WIRE 528 512 496 512
WIRE 608 512 528 512
WIRE 832 512 608 512
WIRE 1600 512 1600 480
WIRE 528 544 528 512
WIRE 864 544 864 528
WIRE 1408 544 1408 512
WIRE 2640 544 2640 528
WIRE 2736 544 2640 544
WIRE 2640 560 2640 544
WIRE 1776 576 1776 560
WIRE -208 592 -208 560
WIRE -1312 608 -1312 576
WIRE 1600 608 1600 576
WIRE 1312 624 1312 496
WIRE 1360 624 1312 624
WIRE 1472 624 1472 480
WIRE 1472 624 1440 624
WIRE 2064 624 2064 592
WIRE 528 640 528 624
WIRE 1984 640 1984 480
WIRE 2032 640 1984 640
WIRE 2336 640 2336 608
WIRE 2576 640 2448 640
WIRE 2128 656 2096 656
WIRE 2208 656 2128 656
WIRE 2288 656 2208 656
WIRE 2640 656 2640 640
WIRE 1776 672 1776 656
WIRE 1856 672 1776 672
WIRE 1968 672 1936 672
WIRE 2032 672 1968 672
WIRE 1776 688 1776 672
WIRE 2816 688 2816 656
WIRE 2512 704 2512 688
WIRE 2736 704 2736 544
WIRE 2784 704 2736 704
WIRE -736 720 -736 64
WIRE 2064 720 2064 688
WIRE 2448 720 2448 640
WIRE 2480 720 2448 720
WIRE 2880 720 2848 720
WIRE 2960 720 2880 720
WIRE 2576 736 2576 640
WIRE 2576 736 2544 736
WIRE 2608 736 2576 736
WIRE 2720 736 2688 736
WIRE 2784 736 2720 736
WIRE 2336 752 2336 736
WIRE 2400 752 2336 752
WIRE 2480 752 2400 752
WIRE -512 768 -512 736
WIRE -112 768 -112 752
WIRE 1216 768 1216 752
WIRE 1776 784 1776 768
WIRE 2336 784 2336 752
WIRE 2336 784 2256 784
WIRE 2512 784 2512 768
WIRE 2816 784 2816 752
WIRE 1968 800 1968 672
WIRE 2016 800 1968 800
WIRE 2128 800 2128 656
WIRE 2128 800 2096 800
WIRE 2336 800 2336 784
WIRE -736 816 -736 800
WIRE -640 816 -736 816
WIRE -592 816 -640 816
WIRE -256 816 -496 816
WIRE 2256 816 2256 784
WIRE -736 832 -736 816
WIRE -640 848 -640 816
WIRE -1904 864 -1904 848
WIRE -1728 864 -1728 832
WIRE -112 864 -112 848
WIRE -16 864 -112 864
WIRE 1216 864 1216 848
WIRE 1312 864 1216 864
WIRE 2720 864 2720 736
WIRE 2768 864 2720 864
WIRE 2880 864 2880 720
WIRE 2880 864 2848 864
WIRE -112 880 -112 864
WIRE 1216 880 1216 864
WIRE 2256 896 2256 880
WIRE 2336 896 2336 880
WIRE 2336 896 2256 896
WIRE 2336 928 2336 896
WIRE -736 944 -736 912
WIRE -640 944 -640 912
WIRE -640 944 -736 944
WIRE -736 960 -736 944
WIRE -1904 976 -1904 944
WIRE -1728 976 -1728 944
WIRE -112 976 -112 960
WIRE 1216 976 1216 960
WIRE 32 1008 32 976
WIRE 1392 1008 1392 976
WIRE -16 1024 -16 864
WIRE 0 1024 -16 1024
WIRE 256 1024 256 992
WIRE 1312 1024 1312 864
WIRE 1360 1024 1312 1024
WIRE 128 1040 64 1040
WIRE 208 1040 128 1040
WIRE 1456 1040 1424 1040
WIRE 1472 1040 1456 1040
WIRE 1584 1040 1552 1040
WIRE 1680 1040 1584 1040
WIRE 1968 1040 1680 1040
WIRE -256 1056 -256 816
WIRE -160 1056 -256 1056
WIRE -48 1056 -80 1056
WIRE 0 1056 -48 1056
WIRE 1072 1056 1072 496
WIRE 1184 1056 1072 1056
WIRE 1296 1056 1264 1056
WIRE 1360 1056 1296 1056
WIRE 1584 1072 1584 1040
WIRE -1728 1088 -1728 1056
WIRE 32 1104 32 1072
WIRE 1392 1104 1392 1072
WIRE 320 1120 256 1120
WIRE 1776 1136 1776 1120
WIRE 1584 1152 1584 1136
WIRE -48 1184 -48 1056
WIRE 0 1184 -48 1184
WIRE 128 1184 128 1040
WIRE 128 1184 80 1184
WIRE 1296 1184 1296 1056
WIRE 1344 1184 1296 1184
WIRE 1456 1184 1456 1040
WIRE 1456 1184 1424 1184
WIRE 2048 1184 2048 1152
WIRE 1968 1200 1968 1040
WIRE 2016 1200 1968 1200
WIRE 2352 1200 2352 1168
WIRE 2112 1216 2080 1216
WIRE 2192 1216 2112 1216
WIRE 2304 1216 2192 1216
WIRE 1776 1232 1776 1216
WIRE 1840 1232 1776 1232
WIRE 1952 1232 1920 1232
WIRE 2016 1232 1952 1232
WIRE 1776 1248 1776 1232
WIRE 2048 1280 2048 1248
WIRE 2416 1296 2352 1296
WIRE 1776 1344 1776 1328
WIRE 1952 1360 1952 1232
WIRE 2000 1360 1952 1360
WIRE 2112 1360 2112 1216
WIRE 2112 1360 2080 1360
FLAG -1312 608 0
FLAG 944 336 0
FLAG -208 592 0
FLAG -48 352 0
FLAG -1024 304 0
FLAG 800 224 0
FLAG 272 384 0
FLAG -864 64 v_supply
FLAG -432 400 enable
FLAG 528 640 0
FLAG 608 512 v_csense
FLAG -1728 1088 0
FLAG -1728 832 enable
FLAG -1904 976 0
FLAG -1904 848 5v
FLAG 864 448 5v
FLAG 864 544 0
FLAG 1600 608 0
FLAG 1584 1152 0
FLAG 1408 416 5v
FLAG 1408 544 0
FLAG 1232 192 5v
FLAG 1232 416 0
FLAG 1392 976 5v
FLAG 1392 1104 0
FLAG 1216 752 5v
FLAG 1216 976 0
FLAG 1680 480 v_oc_slow_delay
FLAG 1680 1040 v_oc_fast_delay
FLAG -736 960 0
FLAG -512 736 5v
FLAG -256 816 v_vsense
FLAG 32 976 5v
FLAG 32 1104 0
FLAG -112 752 5v
FLAG -112 976 0
FLAG 128 1040 v_uvlo
FLAG 2064 592 5v
FLAG 2064 720 0
FLAG 1776 560 5v
FLAG 1776 784 0
FLAG 2048 1152 5v
FLAG 2048 1280 0
FLAG 1776 1120 5v
FLAG 1776 1344 0
FLAG 2192 1216 v_oc_fast
FLAG 2208 656 v_oc_slow
FLAG 2336 928 0
FLAG 2400 752 fault
FLAG 2336 608 5v
FLAG 2416 1296 fault
FLAG 2352 1168 5v
FLAG 320 1120 fault
FLAG 256 992 5v
FLAG 2816 656 5v
FLAG 2816 784 0
FLAG 2640 432 5v
FLAG 2640 656 0
FLAG 2960 720 fault_latched
FLAG 2512 688 5v
FLAG 2512 784 0
SYMBOL voltage -1312 112 R0
SYMATTR InstName V1
SYMATTR Value 60
SYMBOL ind 928 80 R0
SYMATTR InstName L1
SYMATTR Value 5m
SYMBOL res 928 192 R0
SYMATTR InstName R1
SYMATTR Value 6
SYMBOL pmos 240 112 M270
SYMATTR InstName M1
SYMATTR Value RSJ250P10
SYMBOL diode 816 176 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D1
SYMATTR Value VS-E5PH3006
SYMBOL zener -192 176 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D2
SYMATTR Value BZX84C10L
SYMBOL res -224 224 R0
SYMATTR InstName R2
SYMATTR Value 200
SYMBOL npn -272 352 R0
SYMATTR InstName Q1
SYMATTR Value 2N5550
SYMBOL npn -112 96 R0
SYMATTR InstName Q2
SYMATTR Value 2N5550
SYMBOL pnp -112 320 M180
SYMATTR InstName Q3
SYMATTR Value 2N5401
SYMBOL res -288 384 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 1k
SYMBOL res 144 192 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 100
SYMBOL pmos -1184 112 R270
SYMATTR InstName M2
SYMATTR Value RSJ250P10
SYMBOL zener -1040 160 M180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D3
SYMATTR Value BZX84C10L
SYMBOL res -1040 176 R0
SYMATTR InstName R5
SYMATTR Value 10k
SYMBOL res 336 80 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R6
SYMATTR Value 1m
SYMBOL OpAmps\\LTC6102 400 368 R0
SYMATTR InstName U1
SYMBOL res 496 128 R0
SYMATTR InstName R7
SYMATTR Value 34
SYMBOL res -224 464 R0
SYMATTR InstName R8
SYMATTR Value 500
SYMBOL res 512 528 R0
SYMATTR InstName R9
SYMATTR Value 4.99k
SYMBOL voltage -1728 848 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value PULSE(0 3.3 10m 1n 1n 10m 20m 1)
SYMBOL res -432 80 R0
SYMATTR InstName R10
SYMATTR Value 10k
SYMBOL voltage -1904 848 R0
SYMATTR InstName V3
SYMATTR Value 5
SYMBOL res 1584 464 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R11
SYMATTR Value 200k
SYMBOL cap 1584 512 R0
SYMATTR InstName C1
SYMATTR Value 100µ
SYMBOL res 1568 1024 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R12
SYMATTR Value 1
SYMBOL cap 1568 1072 R0
SYMATTR InstName C2
SYMATTR Value 1µ
SYMBOL OpAmps\\UniversalOpAmp2 864 496 R0
SYMATTR InstName U2
SYMBOL OpAmps\\UniversalOpAmp2 1408 480 R0
SYMATTR InstName U3
SYMBOL res 1216 192 R0
SYMATTR InstName R13
SYMATTR Value 10k
SYMBOL res 1216 304 R0
SYMATTR InstName R14
SYMATTR Value 7.9k
SYMBOL OpAmps\\UniversalOpAmp2 1392 1040 R0
SYMATTR InstName U4
SYMBOL res 1200 752 R0
SYMATTR InstName R15
SYMATTR Value 10k
SYMBOL res 1200 864 R0
SYMATTR InstName R16
SYMATTR Value 66.8k
SYMBOL voltage -1312 368 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value PULSE(0 100 225m 200m 10m 5 10)
SYMBOL voltage -1728 960 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V5
SYMATTR Value PULSE(0 3.3 25m 1n 1n 1 1.5 1)
SYMBOL res -752 704 R0
SYMATTR InstName R17
SYMATTR Value 19k
SYMBOL res -752 816 R0
SYMATTR InstName R18
SYMATTR Value 1k
SYMBOL nmos -592 768 M90
SYMATTR InstName M3
SYMATTR Value 2n7002
SYMBOL cap -656 848 R0
SYMATTR InstName C3
SYMATTR Value 1µ
SYMBOL voltage -1312 256 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V6
SYMATTR Value PULSE(0 -120 50m 10m 10m 30m 100m 1)
SYMBOL OpAmps\\UniversalOpAmp2 32 1040 R0
SYMATTR InstName U5
SYMBOL res -128 752 R0
SYMATTR InstName R20
SYMATTR Value 10k
SYMBOL res -128 864 R0
SYMATTR InstName R21
SYMATTR Value 1.3k
SYMBOL res 1280 1040 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R22
SYMATTR Value 1k
SYMBOL res 1440 1168 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R23
SYMATTR Value 34k
SYMBOL res 1296 480 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R24
SYMATTR Value 1k
SYMBOL res 1456 608 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R25
SYMATTR Value 30k
SYMBOL res -64 1040 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R26
SYMATTR Value 1k
SYMBOL res 96 1168 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R27
SYMATTR Value 50k
SYMBOL voltage -1312 480 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V7
SYMATTR Value PULSE(0 200 130m 10m 10m 30m 60m 1)
SYMBOL OpAmps\\UniversalOpAmp2 2064 656 R0
SYMATTR InstName U6
SYMBOL res 1760 560 R0
SYMATTR InstName R28
SYMATTR Value 1k
SYMBOL res 1760 672 R0
SYMATTR InstName R29
SYMATTR Value 1k
SYMBOL res 1952 656 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R30
SYMATTR Value 10k
SYMBOL res 2112 784 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R31
SYMATTR Value 40k
SYMBOL OpAmps\\UniversalOpAmp2 2048 1216 R0
SYMATTR InstName U8
SYMBOL res 1760 1120 R0
SYMATTR InstName R32
SYMATTR Value 1k
SYMBOL res 1760 1232 R0
SYMATTR InstName R33
SYMATTR Value 1k
SYMBOL res 1936 1216 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R34
SYMATTR Value 10k
SYMBOL res 2096 1344 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R35
SYMATTR Value 40k
SYMBOL res 2320 784 R0
SYMATTR InstName R36
SYMATTR Value 10Meg
SYMBOL pmos 2288 736 M180
SYMATTR InstName M4
SYMATTR Value BSS84
SYMBOL pmos 2304 1296 M180
SYMATTR InstName M5
SYMBOL pmos 208 1120 M180
SYMATTR InstName M6
SYMBOL cap 2240 816 R0
SYMATTR InstName C4
SYMATTR Value 100n
SYMBOL OpAmps\\UniversalOpAmp2 2816 720 R0
SYMATTR InstName U7
SYMBOL res 2624 432 R0
SYMATTR InstName R37
SYMATTR Value 10k
SYMBOL res 2624 544 R0
SYMATTR InstName R38
SYMATTR Value 10k
SYMBOL res 2704 720 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R39
SYMATTR Value 10k
SYMBOL res 2864 848 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R40
SYMATTR Value 50k
SYMBOL OpAmps\\UniversalOpAmp2 2512 736 R0
SYMATTR InstName U9
TEXT -1232 -120 Left 2 ;Reverse Polarity Protection
TEXT -72 -24 Left 2 ;High Side Switch
TEXT 872 -16 Left 2 ;Load
TEXT 416 -16 Left 2 ;Current Sense
TEXT -1912 248 Left 2 !.tran 0 500m 0 1u startup
TEXT 1384 304 Left 2 ;Slow Overcurrent Protection
TEXT 1376 880 Left 2 ;Fast Overcurrent Protection
TEXT -664 464 Left 2 ;Current Limited Zener Drive\nR8 limits Zener current.\nR2 dissipates power to preserve Q1.
TEXT -1640 896 Left 2 ;Enable test pulse.
TEXT -1640 1016 Left 2 ;Enable hold ON for remaining testing.
TEXT -1616 312 Left 2 ;Reverse polarity pulse.
TEXT -1632 416 Left 2 ;Overvoltage slow ramp.
TEXT -1480 160 Left 2 ;DC supply.
TEXT -680 656 Left 2 ;M3 protects v_vsense from overvoltage by limiting it to\n5V-V_t, where V_t is threshold voltage of MOSFET.
TEXT -1008 808 Left 2 ;Voltage divider and\nlowpass filter.
TEXT -1624 536 Left 2 ;Overvoltage fast pulse.
TEXT 2440 352 Left 2 ;Shared Fault Bus with Time Delay Latch
